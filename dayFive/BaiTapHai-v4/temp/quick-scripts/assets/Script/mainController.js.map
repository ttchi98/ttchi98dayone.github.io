{"version":3,"sources":["mainController.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","goLeftFlag","goRightFlag","goJumpFlag","counter","frames","limitX","mainItem","Node","onLoad","instance","registerEvent","goLeft","bind","goRight","goJump","resetPos","start","update","dt","checkMove","limitPos","disableButton","disableKey","resetMove","x","scaleX","y","angle","value","emit"],"mappings":"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","file":"mainController.js","sourceRoot":"../../../../assets/Script","sourcesContent":["const Emitter = require(\"mEmitter\");\ncc.Class({\n  extends: cc.Component,\n  properties: {\n    goLeftFlag: false,\n    goRightFlag: false,\n    goJumpFlag: false,\n    counter: 0,\n    frames: 40,\n    limitX: 377,\n    mainItem: cc.Node,\n  },\n  // LIFE-CYCLE CALLBACKS:\n  onLoad() {\n    Emitter.instance = new Emitter();\n    Emitter.instance.registerEvent(\"LEFT\", this.goLeft.bind(this));\n    Emitter.instance.registerEvent(\"RIGHT\", this.goRight.bind(this));\n    Emitter.instance.registerEvent(\"JUMP\", this.goJump.bind(this));\n    Emitter.instance.registerEvent(\"RESET\", this.resetPos.bind(this));\n  },\n  start() {},\n  update(dt) {\n    this.checkMove();\n    this.limitPos();\n  },\n  checkMove() {\n    if (this.goLeftFlag || this.goRightFlag || this.goJumpFlag) {\n      if (this.counter >= this.frames) {\n        this.disableButton(true);\n        this.disableKey(true);\n        this.resetMove();\n        return;\n      }\n      if (this.goLeftFlag) {\n        this.mainItem.x -= 2;\n        this.mainItem.scaleX = 1;\n      }\n      if (this.goRightFlag) {\n        this.mainItem.x += 2;\n        this.mainItem.scaleX = -1;\n      }\n      if (this.goJumpFlag) {\n        if (this.counter < this.frames / 2) {\n          this.mainItem.y += 5;\n        } else this.mainItem.y -= 5;\n\n        if (this.counter >= this.frames / 4 && this.counter < this.frames) {\n          this.mainItem.angle += 360 / ((this.frames * 3) / 4);\n        }\n      }\n      this.disableButton(false);\n      this.disableKey(false);\n      this.counter++;\n    }\n  },\n  goLeft() {\n    this.goLeftFlag = true;\n    this.counter = 0;\n  },\n  goRight() {\n    this.goRightFlag = true;\n    this.counter = 0;\n  },\n  goJump() {\n    this.goJumpFlag = true;\n    this.counter = 0;\n  },\n  resetPos() {\n    this.mainItem.x = 0;\n    this.mainItem.y = -150;\n    this.mainItem.scaleX = 1;\n    this.mainItem.angle = 0;\n  },\n  resetMove() {\n    this.goLeftFlag = false;\n    this.goRightFlag = false;\n    this.goJumpFlag = false;\n  },\n  disableButton(value) {\n    Emitter.instance.emit(\"DISABLE BUTTON\", value);\n  },\n  disableKey(value) {\n    Emitter.instance.emit(\"DISABLE KEY\", value);\n  },\n  limitPos() {\n    if (this.mainItem.x <= -this.limitX) {\n      this.mainItem.x = -this.limitX;\n    } else if (this.mainItem.x >= this.limitX) {\n      this.mainItem.x = this.limitX;\n    }\n  },\n});\n"]}