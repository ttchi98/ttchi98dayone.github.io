{"version":3,"sources":["mainController.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","canMove","goLeftFlag","goRightFlag","goJumpFlag","counter","frames","limitX","mainItem","Node","onLoad","instance","registerEvent","goLeft","bind","goRight","goJump","resetPos","start","update","dt","checkMove","limitPos","disableButton","resetMove","x","scaleX","y","angle","value","emit"],"mappings":"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","file":"mainController.js","sourceRoot":"../../../../assets/Script","sourcesContent":["const Emitter = require(\"mEmitter\");\ncc.Class({\n  extends: cc.Component,\n  properties: {\n    canMove: true,\n    goLeftFlag: false,\n    goRightFlag: false,\n    goJumpFlag: false,\n    counter: 0,\n    frames: 40,\n    limitX: 377,\n    mainItem: cc.Node,\n  },\n  // LIFE-CYCLE CALLBACKS:\n  onLoad() {\n    Emitter.instance = new Emitter();\n    Emitter.instance.registerEvent(\"LEFT\", this.goLeft.bind(this));\n    Emitter.instance.registerEvent(\"RIGHT\", this.goRight.bind(this));\n    Emitter.instance.registerEvent(\"JUMP\", this.goJump.bind(this));\n    Emitter.instance.registerEvent(\"RESET\", this.resetPos.bind(this));\n  },\n  start() {},\n  update(dt) {\n    this.checkMove();\n    this.limitPos();\n  },\n  checkMove() {\n    if (this.goLeftFlag || this.goRightFlag || this.goJumpFlag) {\n      if (this.counter >= this.frames) {\n        this.disableButton(true);\n        this.resetMove();\n        return;\n      }\n      if (this.goLeftFlag) {\n        this.mainItem.x -= 2;\n        this.mainItem.scaleX = 1;\n      }\n      if (this.goRightFlag) {\n        this.mainItem.x += 2;\n        this.mainItem.scaleX = -1;\n      }\n      if (this.goJumpFlag) {\n        if (this.counter < this.frames / 2) {\n          this.mainItem.y += 5;\n        } else this.mainItem.y -= 5;\n\n        if (this.counter >= this.frames / 4 && this.counter < this.frames) {\n          this.mainItem.angle += 360 / ((this.frames * 3) / 4);\n        }\n      }\n      this.disableButton(false);\n      this.counter++;\n    }\n  },\n  goLeft() {\n    this.goLeftFlag = true;\n    this.counter = 0;\n  },\n  goRight() {\n    this.goRightFlag = true;\n    this.counter = 0;\n  },\n  goJump() {\n    this.goJumpFlag = true;\n    this.counter = 0;\n  },\n  resetPos() {\n    this.mainItem.x = 0;\n    this.mainItem.y = -150;\n    this.mainItem.scaleX = 1;\n    this.mainItem.angle = 0;\n  },\n  resetMove() {\n    this.goLeftFlag = false;\n    this.goRightFlag = false;\n    this.goJumpFlag = false;\n  },\n  disableButton(value) {\n    Emitter.instance.emit(\"DISABLE\", value);\n  },\n  limitPos() {\n    if (this.mainItem.x <= -this.limitX) {\n      this.mainItem.x = -this.limitX;\n    } else if (this.mainItem.x >= this.limitX) {\n      this.mainItem.x = this.limitX;\n    }\n  },\n});\n"]}