{"version":3,"sources":["../../../../assets/Script/assets/Script/keyController.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","keyMove","timer","count","onLoad","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","instance","registerEvent","disableKey","bind","keyDown","keyUp","keyRight","keyLeft","start","update","dt","event","keyCode","macro","KEY","down","up","right","left","goDown","matchItemCol","createRandomItem","colorCheck","goUp","goRight","matchItemRow","goLeft","emit","moveSound","value"],"mappings":"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","file":"keyController.js","sourceRoot":"../../../../assets/Script","sourcesContent":["const Emitter = require(\"mEmitter\");\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    keyMove: true,\n    timer: 0,\n    count: 30,\n  },\n  // LIFE-CYCLE CALLBACKS:\n  onLoad() {\n    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n    Emitter.instance.registerEvent(\"DISABLE KEY\", this.disableKey.bind(this));\n    Emitter.instance.registerEvent(\"KEY DOWN\", this.keyDown.bind(this));\n    Emitter.instance.registerEvent(\"KEY UP\", this.keyUp.bind(this));\n    Emitter.instance.registerEvent(\"KEY RIGHT\", this.keyRight.bind(this));\n    Emitter.instance.registerEvent(\"KEY LEFT\", this.keyLeft.bind(this));\n    this.disableKey(false);\n  },\n\n  start() {},\n\n  update(dt) {},\n\n  onKeyDown(event) {\n    if (!this.keyMove) return;\n    switch (event.keyCode) {\n      case cc.macro.KEY.down:\n        this.keyDown();\n        break;\n      case cc.macro.KEY.up:\n        this.keyUp();\n        break;\n      case cc.macro.KEY.right:\n        this.keyRight();\n        break;\n      case cc.macro.KEY.left:\n        this.keyLeft();\n        break;\n    }\n  },\n  keyDown() {\n    this.goDown();\n    this.matchItemCol();\n    this.goDown();\n    this.createRandomItem();\n    this.colorCheck();\n  },\n  keyUp() {\n    this.goUp();\n    this.matchItemCol();\n    this.goUp();\n    this.createRandomItem();\n    this.colorCheck();\n  },\n  keyRight() {\n    this.goRight();\n    this.matchItemRow();\n    this.goRight();\n    this.createRandomItem();\n    this.colorCheck();\n  },\n  keyLeft() {\n    this.goLeft();\n    this.matchItemRow();\n    this.goLeft();\n    this.createRandomItem();\n    this.colorCheck();\n  },\n  colorCheck() {\n    Emitter.instance.emit(\"COLOR CHECK\");\n  },\n  matchItemRow() {\n    Emitter.instance.emit(\"MATCH ROW\");\n  },\n  matchItemCol() {\n    Emitter.instance.emit(\"MATCH COL\");\n  },\n  createRandomItem() {\n    Emitter.instance.emit(\"CREATE RANDOM ITEM\");\n  },\n  moveSound() {\n    Emitter.instance.emit(\"MOVE SOUND\");\n  },\n  goDown() {\n    Emitter.instance.emit(\"DOWN\");\n    this.moveSound();\n  },\n  goUp() {\n    Emitter.instance.emit(\"UP\");\n    this.moveSound();\n  },\n  goRight() {\n    Emitter.instance.emit(\"RIGHT\");\n    this.moveSound();\n  },\n  goLeft() {\n    Emitter.instance.emit(\"LEFT\");\n    this.moveSound();\n  },\n  disableKey(value) {\n    this.keyMove = value;\n  },\n});\n"]}