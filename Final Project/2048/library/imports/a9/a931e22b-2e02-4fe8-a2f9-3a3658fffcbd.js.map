{"version":3,"sources":["../../../../assets/Script/assets/Script/mainController.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","isMove","limit","newItem","item","Node","table","tableChild","Prefab","itemPrefab","deckItem","posArr","onLoad","instance","registerEvent","goDown","bind","goUp","goRight","goLeft","v2","createTable","start","update","dt","positionCheck","i","j","newTableChild","instantiate","addChild","createPreFab","itemPos","Math","floor","random","length","log","position","matchItem","getComponent","Label","warn","string","children","y","x","tween","by"],"mappings":"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","file":"mainController.js","sourceRoot":"../../../../assets/Script","sourcesContent":["const Emitter = require(\"mEmitter\");\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    isMove: true,\n    limit: 165,\n    newItem: null,\n    item: cc.Node,\n    table: cc.Node,\n    tableChild: cc.Prefab,\n    itemPrefab: cc.Prefab,\n    deckItem: cc.Node,\n\n    posArr: [],\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad() {\n    Emitter.instance = new Emitter();\n    Emitter.instance.registerEvent(\"DOWN\", this.goDown.bind(this));\n    Emitter.instance.registerEvent(\"UP\", this.goUp.bind(this));\n    Emitter.instance.registerEvent(\"LEFT\", this.goRight.bind(this));\n    Emitter.instance.registerEvent(\"RIGHT\", this.goLeft.bind(this));\n    this.posArr = [\n      cc.v2(-165, 65),\n      cc.v2(-55, 65),\n      cc.v2(55, 65),\n      cc.v2(165, 65),\n      cc.v2(-165, -45),\n      cc.v2(-55, -45),\n      cc.v2(55, -45),\n      cc.v2(165, -45),\n      cc.v2(-165, -155),\n      cc.v2(55, -155),\n      cc.v2(-55, -155),\n      cc.v2(165, -155),\n      cc.v2(-165, -265),\n      cc.v2(-55, -265),\n      cc.v2(55, -265),\n      cc.v2(165, -265),\n    ];\n    this.createTable();\n  },\n\n  start() {},\n\n  update(dt) {\n    this.positionCheck();\n  },\n  createTable() {\n    for (let i = 1; i <= 4; i++) {\n      for (let j = 1; j <= 4; j++) {\n        let newTableChild = cc.instantiate(this.tableChild);\n        this.table.addChild(newTableChild);\n      }\n    }\n  },\n  createPreFab() {\n    let itemPos = this.posArr[Math.floor(Math.random() * this.posArr.length)];\n    cc.log(itemPos);\n\n    // for (let i = 0; i <= posArr.length; i++) {\n    //   for (let j = 0; i <= posArr.length; j++) {}\n    // }\n\n    this.newItem = cc.instantiate(this.itemPrefab);\n    this.deckItem.addChild(this.newItem);\n\n    this.newItem.position = itemPos;\n  },\n  matchItem() {\n    this.newItem.getComponent(cc.Label);\n    for (let i = 0; i <= 2; i++) {\n      cc.warn(this.newItem.string);\n      if (this.newItem.children[0] == this.newItem.children[1]) {\n        cc.log(\"Match\");\n      }\n    }\n  },\n  positionCheck() {\n    if (this.item.y <= -(this.limit + 100)) {\n      this.item.y = -(this.limit + 100);\n    }\n    if (this.item.y >= this.limit - 100) {\n      this.item.y = this.limit - 100;\n    }\n    if (this.item.x <= -this.limit) {\n      this.item.x = -this.limit;\n    } else if (this.item.x >= this.limit) {\n      this.item.x = this.limit;\n    }\n  },\n  goDown() {\n    cc.tween(this.item)\n      .by(0.2, { position: cc.v2(0, -330) })\n      .start();\n    this.createPreFab();\n    // this.matchItem();\n  },\n  goUp() {\n    cc.tween(this.item)\n      .by(0.2, { position: cc.v2(0, 330) })\n      .start();\n    this.createPreFab();\n  },\n  goRight() {\n    cc.tween(this.item)\n      .by(0.2, { position: cc.v2(-this.limit * 2, 0) })\n      .start();\n    this.createPreFab();\n  },\n  goLeft() {\n    cc.tween(this.item)\n      .by(0.2, { position: cc.v2(this.limit * 2, 0) })\n      .start();\n    this.createPreFab();\n  },\n});\n"]}