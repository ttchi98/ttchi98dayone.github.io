{"version":3,"sources":["touchController.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","touchNode","Node","_xStart","_xEnd","_yStart","_yEnd","canTouch","onLoad","on","EventType","TOUCH_START","touchStart","TOUCH_END","touchEnd","start","update","dt","event","getLocationX","getLocationY","isMove","Math","abs","log","instance","emit","error"],"mappings":";;;;;;AAAA,IAAMA,UAAUC,QAAQ,UAAR,CAAhB;;AAEAC,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,eAAWL,GAAGM,IADJ;AAEVC,aAAS,CAFC;AAGVC,WAAO,CAHG;AAIVC,aAAS,CAJC;AAKVC,WAAO,CALG;AAMVC,cAAU;AANA,GAHL;;AAYP;;AAEAC,QAdO,oBAcE;AACP,SAAKP,SAAL,CAAeQ,EAAf,CAAkBb,GAAGM,IAAH,CAAQQ,SAAR,CAAkBC,WAApC,EAAiD,KAAKC,UAAtD,EAAkE,IAAlE;AACA,SAAKX,SAAL,CAAeQ,EAAf,CAAkBb,GAAGM,IAAH,CAAQQ,SAAR,CAAkBG,SAApC,EAA+C,KAAKC,QAApD,EAA8D,IAA9D;AACA;AACA;AACD,GAnBM;AAqBPC,OArBO,mBAqBC,CAAE,CArBH;AAuBPC,QAvBO,kBAuBAC,EAvBA,EAuBI,CAAE,CAvBN;AAyBPL,YAzBO,sBAyBIM,KAzBJ,EAyBW;AAChB,SAAKf,OAAL,GAAee,MAAMC,YAAN,EAAf;AACA,SAAKd,OAAL,GAAea,MAAME,YAAN,EAAf;AACD,GA5BM;AA6BPN,UA7BO,oBA6BEI,KA7BF,EA6BS;AACd,SAAKd,KAAL,GAAac,MAAMC,YAAN,EAAb;AACA,SAAKb,KAAL,GAAaY,MAAME,YAAN,EAAb;AACA,SAAKC,MAAL;AACD,GAjCM;AAkCPA,QAlCO,oBAkCE;AACP,QAAI,KAAKlB,OAAL,IAAgB,IAAhB,IAAwB,KAAKE,OAAL,IAAgB,IAAxC,IAAgD,KAAKD,KAAL,IAAc,IAA9D,IAAsE,KAAKE,KAAL,IAAc,IAAxF,EAA8F;AAC5F,UAAIgB,KAAKC,GAAL,CAAS,KAAKnB,KAAL,GAAa,KAAKD,OAA3B,IAAsCmB,KAAKC,GAAL,CAAS,KAAKjB,KAAL,GAAa,KAAKD,OAA3B,CAA1C,EAA+E;AAC7E,YAAI,KAAKD,KAAL,GAAa,KAAKD,OAAtB,EAA+B;AAC7BP,aAAG4B,GAAH,CAAO,YAAP;AACA9B,kBAAQ+B,QAAR,CAAiBC,IAAjB,CAAsB,WAAtB;AACD,SAHD,MAGO;AACL9B,aAAG4B,GAAH,CAAO,WAAP;AACA9B,kBAAQ+B,QAAR,CAAiBC,IAAjB,CAAsB,UAAtB;AACD;AACF,OARD,MAQO;AACL,YAAI,KAAKpB,KAAL,GAAa,KAAKD,OAAtB,EAA+B;AAC7BT,aAAG4B,GAAH,CAAO,SAAP;AACA9B,kBAAQ+B,QAAR,CAAiBC,IAAjB,CAAsB,QAAtB;AACD,SAHD,MAGO;AACL9B,aAAG4B,GAAH,CAAO,WAAP;AACA9B,kBAAQ+B,QAAR,CAAiBC,IAAjB,CAAsB,UAAtB;AACD;AACF;AACF,KAlBD,MAkBO9B,GAAG+B,KAAH,CAAS,UAAT;AACR;AAtDM,CAAT","file":"touchController.js","sourceRoot":"../../../../assets/Script","sourcesContent":["const Emitter = require(\"mEmitter\");\n\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    touchNode: cc.Node,\n    _xStart: 0,\n    _xEnd: 0,\n    _yStart: 0,\n    _yEnd: 0,\n    canTouch: true,\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad() {\n    this.touchNode.on(cc.Node.EventType.TOUCH_START, this.touchStart, this);\n    this.touchNode.on(cc.Node.EventType.TOUCH_END, this.touchEnd, this);\n    // this.touchNode.on(cc.Node.EventType.MOUSE_DOWN, this.touchStart, this);\n    // this.touchNode.on(cc.Node.EventType.MOUSE_UP, this.touchEnd, this);\n  },\n\n  start() {},\n\n  update(dt) {},\n\n  touchStart(event) {\n    this._xStart = event.getLocationX();\n    this._yStart = event.getLocationY();\n  },\n  touchEnd(event) {\n    this._xEnd = event.getLocationX();\n    this._yEnd = event.getLocationY();\n    this.isMove();\n  },\n  isMove() {\n    if (this._xStart != null && this._yStart != null && this._xEnd != null && this._yEnd != null) {\n      if (Math.abs(this._xEnd - this._xStart) > Math.abs(this._yEnd - this._yStart)) {\n        if (this._xEnd > this._xStart) {\n          cc.log(\"MOVE RIGHT\");\n          Emitter.instance.emit(\"KEY RIGHT\");\n        } else {\n          cc.log(\"MOVE LEFT\");\n          Emitter.instance.emit(\"KEY LEFT\");\n        }\n      } else {\n        if (this._yEnd > this._yStart) {\n          cc.log(\"MOVE UP\");\n          Emitter.instance.emit(\"KEY UP\");\n        } else {\n          cc.log(\"MOVE DOWN\");\n          Emitter.instance.emit(\"KEY DOWN\");\n        }\n      }\n    } else cc.error(\"ERROR!!!\");\n  },\n});\n"]}