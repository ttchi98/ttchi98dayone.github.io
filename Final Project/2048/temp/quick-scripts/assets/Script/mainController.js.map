{"version":3,"sources":["mainController.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","canMove","limit","score","newItem","scoreLabel","Label","item","Node","table","tableChild","Prefab","itemPrefab","deckItem","gameOverForm","gameOverLabel","posArr","indexArr","onLoad","instance","registerEvent","goDown","bind","goUp","goRight","goLeft","createRandomItem","matchItemRow","matchItemCol","newGameEvent","v2","createTable","createPreFab","start","update","dt","positionCheck","i","j","newTableChild","instantiate","addChild","children","getComponent","string","push","position","log","colorCheck","randomNumber","Math","floor","random","length","checkForLose","matchTotal","parseInt","checkForWin","opacity","y","x","rowOne","rowTwo","rowThree","rowFour","rows","filteredRow","filter","num","zeros","Array","fill","newRow","concat","colOne","colTwo","colThree","colFour","cols","filteredCol","newCol","active","removeAllChildren"],"mappings":"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","file":"mainController.js","sourceRoot":"../../../../assets/Script","sourcesContent":["const Emitter = require(\"mEmitter\");\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    canMove: false,\n    limit: 165,\n    score: 0,\n    newItem: null,\n\n    scoreLabel: cc.Label,\n    item: cc.Node,\n    table: cc.Node,\n    tableChild: cc.Prefab,\n    itemPrefab: cc.Prefab,\n    deckItem: cc.Node,\n\n    gameOverForm: cc.Node,\n    gameOverLabel: cc.Label,\n\n    posArr: [],\n    indexArr: [],\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad() {\n    Emitter.instance = new Emitter();\n    Emitter.instance.registerEvent(\"DOWN\", this.goDown.bind(this));\n    Emitter.instance.registerEvent(\"UP\", this.goUp.bind(this));\n    Emitter.instance.registerEvent(\"RIGHT\", this.goRight.bind(this));\n    Emitter.instance.registerEvent(\"LEFT\", this.goLeft.bind(this));\n    Emitter.instance.registerEvent(\"CREATE RANDOM ITEM\", this.createRandomItem.bind(this));\n    Emitter.instance.registerEvent(\"MATCH ROW\", this.matchItemRow.bind(this));\n    Emitter.instance.registerEvent(\"MATCH COL\", this.matchItemCol.bind(this));\n    Emitter.instance.registerEvent(\"NEW GAME\", this.newGameEvent.bind(this));\n\n    this.posArr = [\n      cc.v2(-165, 65),\n      cc.v2(-55, 65),\n      cc.v2(55, 65),\n      cc.v2(165, 65),\n      cc.v2(-165, -45),\n      cc.v2(-55, -45),\n      cc.v2(55, -45),\n      cc.v2(165, -45),\n      cc.v2(-165, -155),\n      cc.v2(55, -155),\n      cc.v2(-55, -155),\n      cc.v2(165, -155),\n      cc.v2(-165, -265),\n      cc.v2(-55, -265),\n      cc.v2(55, -265),\n      cc.v2(165, -265),\n    ];\n    this.createTable();\n    this.createPreFab();\n    // if (this.newItemLevel.string == 0) {\n    //   this.newItem.color = \"#8D8D8C\";\n    // }\n  },\n\n  start() {},\n\n  update(dt) {\n    this.positionCheck();\n  },\n  createTable() {\n    for (let i = 1; i <= 4; i++) {\n      for (let j = 1; j <= 4; j++) {\n        let newTableChild = cc.instantiate(this.tableChild);\n        this.table.addChild(newTableChild);\n      }\n    }\n  },\n  createPreFab() {\n    // this.newItem = cc.instantiate(this.itemPrefab);\n    // this.deckItem.addChild(this.newItem);\n    // let newItemLevel = this.newItem.children[0].getComponent(cc.Label);\n    // newItemLevel.string = 0;\n    // let randomArr = [2, 4];\n    // newItemLevel.string =\n    //   randomArr[Math.floor(Math.random() * randomArr.length)];\n    // let itemPos = this.posArr[Math.floor(Math.random() * this.posArr.length)];\n    // cc.log(itemPos);\n    // this.newItem.position = itemPos;\n    for (let i = 0; i < 16; i++) {\n      this.newItem = cc.instantiate(this.itemPrefab);\n      this.deckItem.addChild(this.newItem);\n      this.newItem.children[0].getComponent(cc.Label).string = 0;\n      this.indexArr.push(this.newItem);\n      this.newItem.position = this.posArr[i];\n    }\n    // cc.log(this.deckItem.children);\n    cc.log(this.indexArr);\n    this.colorCheck();\n    this.createRandomItem();\n    this.createRandomItem();\n  },\n  createRandomItem() {\n    let randomNumber = Math.floor(Math.random() * this.indexArr.length);\n    if (this.indexArr[randomNumber].children[0].getComponent(cc.Label).string == 0) {\n      this.indexArr[randomNumber].children[0].getComponent(cc.Label).string = 2;\n      this.checkForLose();\n    } else this.createRandomItem();\n  },\n  matchItemRow() {\n    for (let i = 0; i < 15; i++) {\n      if (\n        this.indexArr[i].children[0].getComponent(cc.Label).string ===\n        this.indexArr[i + 1].children[0].getComponent(cc.Label).string\n      ) {\n        let matchTotal =\n          parseInt(this.indexArr[i].children[0].getComponent(cc.Label).string) +\n          parseInt(this.indexArr[i + 1].children[0].getComponent(cc.Label).string);\n        this.indexArr[i].children[0].getComponent(cc.Label).string = matchTotal;\n        this.indexArr[i + 1].children[0].getComponent(cc.Label).string = 0;\n        this.score += matchTotal;\n        this.scoreLabel.string = this.score;\n      }\n    }\n    this.colorCheck();\n    this.checkForWin();\n  },\n  matchItemCol() {\n    for (let i = 0; i < 12; i++) {\n      if (\n        this.indexArr[i].children[0].getComponent(cc.Label).string ===\n        this.indexArr[i + 4].children[0].getComponent(cc.Label).string\n      ) {\n        let matchTotal =\n          parseInt(this.indexArr[i].children[0].getComponent(cc.Label).string) +\n          parseInt(this.indexArr[i + 4].children[0].getComponent(cc.Label).string);\n        this.indexArr[i].children[0].getComponent(cc.Label).string = 0;\n        this.indexArr[i + 4].children[0].getComponent(cc.Label).string = matchTotal;\n        this.score += matchTotal;\n        this.scoreLabel.string = this.score;\n      }\n    }\n    this.colorCheck();\n    this.checkForWin();\n  },\n  colorCheck() {\n    for (let i = 0; i <= 15; i++) {\n      if (this.indexArr[i].children[0].getComponent(cc.Label).string == 0) {\n        this.indexArr[i].opacity = 230;\n        this.indexArr[i].children[0].opacity = 230;\n      } else if (this.indexArr[i].children[0].getComponent(cc.Label).string == 2) {\n        this.indexArr[i].opacity = 220;\n        this.indexArr[i].children[0].opacity = 220;\n      }\n    }\n  },\n  positionCheck() {\n    if (this.item.y <= -(this.limit + 100)) {\n      this.item.y = -(this.limit + 100);\n    }\n    if (this.item.y >= this.limit - 100) {\n      this.item.y = this.limit - 100;\n    }\n    if (this.item.x <= -this.limit) {\n      this.item.x = -this.limit;\n    } else if (this.item.x >= this.limit) {\n      this.item.x = this.limit;\n    }\n  },\n  goRight() {\n    // let goRight = cc.moveBy(0.2, -this.limit * 2, 0);\n    // this.item.runAction(goRight);\n    for (let i = 0; i < 16; i++) {\n      if (i % 4 === 0) {\n        let rowOne = this.indexArr[i].children[0].getComponent(cc.Label).string;\n        let rowTwo = this.indexArr[i + 1].children[0].getComponent(cc.Label).string;\n        let rowThree = this.indexArr[i + 2].children[0].getComponent(cc.Label).string;\n        let rowFour = this.indexArr[i + 3].children[0].getComponent(cc.Label).string;\n        let rows = [parseInt(rowOne), parseInt(rowTwo), parseInt(rowThree), parseInt(rowFour)];\n\n        let filteredRow = rows.filter((num) => num);\n        let zeros = Array(4 - filteredRow.length).fill(0);\n\n        let newRow = zeros.concat(filteredRow);\n\n        this.indexArr[i].children[0].getComponent(cc.Label).string = newRow[0];\n        this.indexArr[i + 1].children[0].getComponent(cc.Label).string = newRow[1];\n        this.indexArr[i + 2].children[0].getComponent(cc.Label).string = newRow[2];\n        this.indexArr[i + 3].children[0].getComponent(cc.Label).string = newRow[3];\n      }\n    }\n  },\n  goLeft() {\n    // let goLeft = cc.moveBy(0.2, this.limit * -2, 0);\n    // this.item.runAction(goLeft);\n    for (let i = 0; i < 16; i++) {\n      if (i % 4 === 0) {\n        let rowOne = this.indexArr[i].children[0].getComponent(cc.Label).string;\n        let rowTwo = this.indexArr[i + 1].children[0].getComponent(cc.Label).string;\n        let rowThree = this.indexArr[i + 2].children[0].getComponent(cc.Label).string;\n        let rowFour = this.indexArr[i + 3].children[0].getComponent(cc.Label).string;\n        let rows = [parseInt(rowOne), parseInt(rowTwo), parseInt(rowThree), parseInt(rowFour)];\n\n        let filteredRow = rows.filter((num) => num);\n        let zeros = Array(4 - filteredRow.length).fill(0);\n\n        let newRow = filteredRow.concat(zeros);\n\n        this.indexArr[i].children[0].getComponent(cc.Label).string = newRow[0];\n        this.indexArr[i + 1].children[0].getComponent(cc.Label).string = newRow[1];\n        this.indexArr[i + 2].children[0].getComponent(cc.Label).string = newRow[2];\n        this.indexArr[i + 3].children[0].getComponent(cc.Label).string = newRow[3];\n      }\n    }\n  },\n  goUp() {\n    // let goUp = cc.moveBy(0.2, 0, 330);\n    // this.item.runAction(goUp);\n    for (let i = 0; i < 4; i++) {\n      let colOne = this.indexArr[i].children[0].getComponent(cc.Label).string;\n      let colTwo = this.indexArr[i + 4].children[0].getComponent(cc.Label).string;\n      let colThree = this.indexArr[i + 4 * 2].children[0].getComponent(cc.Label).string;\n      let colFour = this.indexArr[i + 4 * 3].children[0].getComponent(cc.Label).string;\n      let cols = [parseInt(colOne), parseInt(colTwo), parseInt(colThree), parseInt(colFour)];\n\n      let filteredCol = cols.filter((num) => num);\n      let zeros = Array(4 - filteredCol.length).fill(0);\n\n      let newCol = filteredCol.concat(zeros);\n\n      this.indexArr[i].children[0].getComponent(cc.Label).string = newCol[0];\n      this.indexArr[i + 4].children[0].getComponent(cc.Label).string = newCol[1];\n      this.indexArr[i + 4 * 2].children[0].getComponent(cc.Label).string = newCol[2];\n      this.indexArr[i + 4 * 3].children[0].getComponent(cc.Label).string = newCol[3];\n    }\n  },\n  goDown() {\n    // let goDown = cc.moveBy(0.2, 0, -330);\n    // this.item.runAction(goDown);\n\n    cc.log(\"Down\");\n    for (let i = 0; i < 4; i++) {\n      let colOne = this.indexArr[i].children[0].getComponent(cc.Label).string;\n      let colTwo = this.indexArr[i + 4].children[0].getComponent(cc.Label).string;\n      let colThree = this.indexArr[i + 4 * 2].children[0].getComponent(cc.Label).string;\n      let colFour = this.indexArr[i + 4 * 3].children[0].getComponent(cc.Label).string;\n      let cols = [parseInt(colOne), parseInt(colTwo), parseInt(colThree), parseInt(colFour)];\n      cc.log(cols);\n\n      let filteredCol = cols.filter((num) => num);\n      let zeros = Array(4 - filteredCol.length).fill(0);\n\n      let newCol = zeros.concat(filteredCol);\n\n      this.indexArr[i].children[0].getComponent(cc.Label).string = newCol[0];\n      this.indexArr[i + 4].children[0].getComponent(cc.Label).string = newCol[1];\n      this.indexArr[i + 4 * 2].children[0].getComponent(cc.Label).string = newCol[2];\n      this.indexArr[i + 4 * 3].children[0].getComponent(cc.Label).string = newCol[3];\n    }\n  },\n\n  checkForWin() {\n    for (let i = 0; i < this.indexArr.length; i++) {\n      if (this.indexArr[i].children[0].getComponent(cc.Label).string == 2048) {\n        this.gameOverForm.active = true;\n        this.gameOverLabel.string = \"You Win!\";\n      }\n    }\n  },\n  checkForLose() {\n    let zeros = 0;\n    for (let i = 0; i < this.indexArr.length; i++) {\n      if (this.indexArr[i].children[0].getComponent(cc.Label).string == 0) {\n        zeros++;\n      }\n    }\n    if (zeros === 0) {\n      this.gameOverForm.active = true;\n      this.gameOverLabel.string = \"Game Over!\";\n    }\n  },\n  newGameEvent() {\n    this.deckItem.removeAllChildren(this.newItem);\n    this.score = 0;\n    this.scoreLabel.string = this.score;\n    this.indexArr = [];\n    this.createPreFab();\n    this.gameOverForm.active = false;\n  },\n});\n"]}