{"version":3,"sources":["mainController.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","canMove","limit","score","newItem","scoreLabel","Label","item","Node","table","tableChild","Prefab","itemPrefab","deckItem","tutorialForm","gameOverForm","gameOverLabel","posArr","indexArr","onLoad","instance","registerEvent","goDown","bind","goUp","goRight","goLeft","createRandomItem","matchItemRow","matchItemCol","newGameEvent","tutorialEvent","closeTutorialEvent","v2","createTable","createPreFab","start","update","dt","positionCheck","i","j","newTableChild","instantiate","addChild","children","getComponent","string","push","position","log","colorCheck","randomNumber","Math","floor","random","length","checkForLose","matchTotal","parseInt","checkForWin","opacity","y","x","rowOne","rowTwo","rowThree","rowFour","rows","filteredRow","filter","num","zeros","Array","fill","newRow","concat","colOne","colTwo","colThree","colFour","cols","filteredCol","newCol","active","removeAllChildren"],"mappings":"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","file":"mainController.js","sourceRoot":"../../../../assets/Script","sourcesContent":["const Emitter = require(\"mEmitter\");\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    canMove: false,\n    limit: 165,\n    score: 0,\n    newItem: null,\n\n    scoreLabel: cc.Label,\n    item: cc.Node,\n    table: cc.Node,\n    tableChild: cc.Prefab,\n    itemPrefab: cc.Prefab,\n    deckItem: cc.Node,\n\n    tutorialForm: cc.Node,\n    gameOverForm: cc.Node,\n    gameOverLabel: cc.Label,\n\n    posArr: [],\n    indexArr: [],\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad() {\n    Emitter.instance = new Emitter();\n    Emitter.instance.registerEvent(\"DOWN\", this.goDown.bind(this));\n    Emitter.instance.registerEvent(\"UP\", this.goUp.bind(this));\n    Emitter.instance.registerEvent(\"RIGHT\", this.goRight.bind(this));\n    Emitter.instance.registerEvent(\"LEFT\", this.goLeft.bind(this));\n    Emitter.instance.registerEvent(\"CREATE RANDOM ITEM\", this.createRandomItem.bind(this));\n    Emitter.instance.registerEvent(\"MATCH ROW\", this.matchItemRow.bind(this));\n    Emitter.instance.registerEvent(\"MATCH COL\", this.matchItemCol.bind(this));\n    Emitter.instance.registerEvent(\"NEW GAME\", this.newGameEvent.bind(this));\n    Emitter.instance.registerEvent(\"TUTORIAL\", this.tutorialEvent.bind(this));\n    Emitter.instance.registerEvent(\"CLOSE TUTORIAL\", this.closeTutorialEvent.bind(this));\n\n    this.posArr = [\n      cc.v2(-165, 65),\n      cc.v2(-55, 65),\n      cc.v2(55, 65),\n      cc.v2(165, 65),\n      cc.v2(-165, -45),\n      cc.v2(-55, -45),\n      cc.v2(55, -45),\n      cc.v2(165, -45),\n      cc.v2(-165, -155),\n      cc.v2(55, -155),\n      cc.v2(-55, -155),\n      cc.v2(165, -155),\n      cc.v2(-165, -265),\n      cc.v2(-55, -265),\n      cc.v2(55, -265),\n      cc.v2(165, -265),\n    ];\n    this.createTable();\n    this.createPreFab();\n    // if (this.newItemLevel.string == 0) {\n    //   this.newItem.color = \"#8D8D8C\";\n    // }\n  },\n\n  start() {},\n\n  update(dt) {\n    this.positionCheck();\n  },\n  createTable() {\n    for (let i = 1; i <= 4; i++) {\n      for (let j = 1; j <= 4; j++) {\n        let newTableChild = cc.instantiate(this.tableChild);\n        this.table.addChild(newTableChild);\n      }\n    }\n  },\n  createPreFab() {\n    // this.newItem = cc.instantiate(this.itemPrefab);\n    // this.deckItem.addChild(this.newItem);\n    // let newItemLevel = this.newItem.children[0].getComponent(cc.Label);\n    // newItemLevel.string = 0;\n    // let randomArr = [2, 4];\n    // newItemLevel.string =\n    //   randomArr[Math.floor(Math.random() * randomArr.length)];\n    // let itemPos = this.posArr[Math.floor(Math.random() * this.posArr.length)];\n    // cc.log(itemPos);\n    // this.newItem.position = itemPos;\n    for (let i = 0; i < 16; i++) {\n      this.newItem = cc.instantiate(this.itemPrefab);\n      this.deckItem.addChild(this.newItem);\n      this.newItem.children[0].getComponent(cc.Label).string = 0;\n      this.indexArr.push(this.newItem);\n      this.newItem.position = this.posArr[i];\n    }\n    // cc.log(this.deckItem.children);\n    cc.log(this.indexArr);\n    this.colorCheck();\n    this.createRandomItem();\n    this.createRandomItem();\n  },\n  createRandomItem() {\n    let randomNumber = Math.floor(Math.random() * this.indexArr.length);\n    if (this.indexArr[randomNumber].children[0].getComponent(cc.Label).string == 0) {\n      this.indexArr[randomNumber].children[0].getComponent(cc.Label).string = 2;\n      this.checkForLose();\n    } else this.createRandomItem();\n  },\n  matchItemRow() {\n    for (let i = 0; i < 15; i++) {\n      if (\n        this.indexArr[i].children[0].getComponent(cc.Label).string ===\n        this.indexArr[i + 1].children[0].getComponent(cc.Label).string\n      ) {\n        let matchTotal =\n          parseInt(this.indexArr[i].children[0].getComponent(cc.Label).string) +\n          parseInt(this.indexArr[i + 1].children[0].getComponent(cc.Label).string);\n        this.indexArr[i].children[0].getComponent(cc.Label).string = matchTotal;\n        this.indexArr[i + 1].children[0].getComponent(cc.Label).string = 0;\n        this.score += matchTotal;\n        this.scoreLabel.string = this.score;\n      }\n    }\n    this.colorCheck();\n    this.checkForWin();\n  },\n  matchItemCol() {\n    for (let i = 0; i < 12; i++) {\n      if (\n        this.indexArr[i].children[0].getComponent(cc.Label).string ===\n        this.indexArr[i + 4].children[0].getComponent(cc.Label).string\n      ) {\n        let matchTotal =\n          parseInt(this.indexArr[i].children[0].getComponent(cc.Label).string) +\n          parseInt(this.indexArr[i + 4].children[0].getComponent(cc.Label).string);\n        this.indexArr[i].children[0].getComponent(cc.Label).string = 0;\n        this.indexArr[i + 4].children[0].getComponent(cc.Label).string = matchTotal;\n        this.score += matchTotal;\n        this.scoreLabel.string = this.score;\n      }\n    }\n    this.colorCheck();\n    this.checkForWin();\n  },\n  colorCheck() {\n    for (let i = 0; i <= 15; i++) {\n      if (this.indexArr[i].children[0].getComponent(cc.Label).string == 0) {\n        this.indexArr[i].opacity = 230;\n        this.indexArr[i].children[0].opacity = 230;\n      } else if (this.indexArr[i].children[0].getComponent(cc.Label).string == 2) {\n        this.indexArr[i].opacity = 220;\n        this.indexArr[i].children[0].opacity = 220;\n      }\n    }\n  },\n  positionCheck() {\n    if (this.item.y <= -(this.limit + 100)) {\n      this.item.y = -(this.limit + 100);\n    }\n    if (this.item.y >= this.limit - 100) {\n      this.item.y = this.limit - 100;\n    }\n    if (this.item.x <= -this.limit) {\n      this.item.x = -this.limit;\n    } else if (this.item.x >= this.limit) {\n      this.item.x = this.limit;\n    }\n  },\n  goRight() {\n    // let goRight = cc.moveBy(0.2, -this.limit * 2, 0);\n    // this.item.runAction(goRight);\n    for (let i = 0; i < 16; i++) {\n      if (i % 4 === 0) {\n        let rowOne = this.indexArr[i].children[0].getComponent(cc.Label).string;\n        let rowTwo = this.indexArr[i + 1].children[0].getComponent(cc.Label).string;\n        let rowThree = this.indexArr[i + 2].children[0].getComponent(cc.Label).string;\n        let rowFour = this.indexArr[i + 3].children[0].getComponent(cc.Label).string;\n        let rows = [parseInt(rowOne), parseInt(rowTwo), parseInt(rowThree), parseInt(rowFour)];\n\n        let filteredRow = rows.filter((num) => num);\n        let zeros = Array(4 - filteredRow.length).fill(0);\n\n        let newRow = zeros.concat(filteredRow);\n\n        this.indexArr[i].children[0].getComponent(cc.Label).string = newRow[0];\n        this.indexArr[i + 1].children[0].getComponent(cc.Label).string = newRow[1];\n        this.indexArr[i + 2].children[0].getComponent(cc.Label).string = newRow[2];\n        this.indexArr[i + 3].children[0].getComponent(cc.Label).string = newRow[3];\n      }\n    }\n  },\n  goLeft() {\n    // let goLeft = cc.moveBy(0.2, this.limit * -2, 0);\n    // this.item.runAction(goLeft);\n    for (let i = 0; i < 16; i++) {\n      if (i % 4 === 0) {\n        let rowOne = this.indexArr[i].children[0].getComponent(cc.Label).string;\n        let rowTwo = this.indexArr[i + 1].children[0].getComponent(cc.Label).string;\n        let rowThree = this.indexArr[i + 2].children[0].getComponent(cc.Label).string;\n        let rowFour = this.indexArr[i + 3].children[0].getComponent(cc.Label).string;\n        let rows = [parseInt(rowOne), parseInt(rowTwo), parseInt(rowThree), parseInt(rowFour)];\n\n        let filteredRow = rows.filter((num) => num);\n        let zeros = Array(4 - filteredRow.length).fill(0);\n\n        let newRow = filteredRow.concat(zeros);\n\n        this.indexArr[i].children[0].getComponent(cc.Label).string = newRow[0];\n        this.indexArr[i + 1].children[0].getComponent(cc.Label).string = newRow[1];\n        this.indexArr[i + 2].children[0].getComponent(cc.Label).string = newRow[2];\n        this.indexArr[i + 3].children[0].getComponent(cc.Label).string = newRow[3];\n      }\n    }\n  },\n  goUp() {\n    // let goUp = cc.moveBy(0.2, 0, 330);\n    // this.item.runAction(goUp);\n    for (let i = 0; i < 4; i++) {\n      let colOne = this.indexArr[i].children[0].getComponent(cc.Label).string;\n      let colTwo = this.indexArr[i + 4].children[0].getComponent(cc.Label).string;\n      let colThree = this.indexArr[i + 4 * 2].children[0].getComponent(cc.Label).string;\n      let colFour = this.indexArr[i + 4 * 3].children[0].getComponent(cc.Label).string;\n      let cols = [parseInt(colOne), parseInt(colTwo), parseInt(colThree), parseInt(colFour)];\n\n      let filteredCol = cols.filter((num) => num);\n      let zeros = Array(4 - filteredCol.length).fill(0);\n\n      let newCol = filteredCol.concat(zeros);\n\n      this.indexArr[i].children[0].getComponent(cc.Label).string = newCol[0];\n      this.indexArr[i + 4].children[0].getComponent(cc.Label).string = newCol[1];\n      this.indexArr[i + 4 * 2].children[0].getComponent(cc.Label).string = newCol[2];\n      this.indexArr[i + 4 * 3].children[0].getComponent(cc.Label).string = newCol[3];\n    }\n  },\n  goDown() {\n    // let goDown = cc.moveBy(0.2, 0, -330);\n    // this.item.runAction(goDown);\n    for (let i = 0; i < 4; i++) {\n      let colOne = this.indexArr[i].children[0].getComponent(cc.Label).string;\n      let colTwo = this.indexArr[i + 4].children[0].getComponent(cc.Label).string;\n      let colThree = this.indexArr[i + 4 * 2].children[0].getComponent(cc.Label).string;\n      let colFour = this.indexArr[i + 4 * 3].children[0].getComponent(cc.Label).string;\n      let cols = [parseInt(colOne), parseInt(colTwo), parseInt(colThree), parseInt(colFour)];\n\n      let filteredCol = cols.filter((num) => num);\n      let zeros = Array(4 - filteredCol.length).fill(0);\n\n      let newCol = zeros.concat(filteredCol);\n\n      this.indexArr[i].children[0].getComponent(cc.Label).string = newCol[0];\n      this.indexArr[i + 4].children[0].getComponent(cc.Label).string = newCol[1];\n      this.indexArr[i + 4 * 2].children[0].getComponent(cc.Label).string = newCol[2];\n      this.indexArr[i + 4 * 3].children[0].getComponent(cc.Label).string = newCol[3];\n    }\n  },\n\n  checkForWin() {\n    for (let i = 0; i < this.indexArr.length; i++) {\n      if (this.indexArr[i].children[0].getComponent(cc.Label).string == 2048) {\n        this.gameOverForm.active = true;\n        this.gameOverLabel.string = \"You Win!\";\n      }\n    }\n  },\n  checkForLose() {\n    let zeros = 0;\n    for (let i = 0; i < this.indexArr.length; i++) {\n      if (this.indexArr[i].children[0].getComponent(cc.Label).string == 0) {\n        zeros++;\n      }\n    }\n    if (zeros === 0) {\n      this.gameOverForm.active = true;\n      this.gameOverLabel.string = \"Game Over!\";\n    }\n  },\n  newGameEvent() {\n    this.deckItem.removeAllChildren(this.newItem);\n    this.score = 0;\n    this.scoreLabel.string = this.score;\n    this.indexArr = [];\n    this.createPreFab();\n    this.gameOverForm.active = false;\n  },\n  tutorialEvent() {\n    this.tutorialForm.active == false ? (this.tutorialForm.active = true) : (this.tutorialForm.active = false);\n  },\n  closeTutorialEvent() {\n    this.tutorialForm.active = false;\n  },\n});\n"]}