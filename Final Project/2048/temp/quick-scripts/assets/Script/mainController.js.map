{"version":3,"sources":["mainController.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","canMove","limit","score","newItem","scoreLabel","Label","bestLabel","item","Node","table","tableChild","Prefab","itemPrefab","deckItem","posArr","indexArr","onLoad","instance","registerEvent","goDown","bind","goUp","goRight","goLeft","createRandomItem","matchItemRow","matchItemCol","v2","createTable","createPreFab","start","update","dt","positionCheck","i","j","newTableChild","instantiate","addChild","children","getComponent","string","push","position","log","randomNumber","Math","floor","random","length","checkForLose","matchTotal","parseInt","checkForWin","y","x","rowOne","rowTwo","rowThree","rowFour","rows","filteredRow","filter","num","missingRow","zeros","Array","fill","newRow","concat","colOne","colTwo","colThree","colFour","cols","filteredCol","missingCol","newCol"],"mappings":"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","file":"mainController.js","sourceRoot":"../../../../assets/Script","sourcesContent":["const Emitter = require(\"mEmitter\");\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    canMove: false,\n    limit: 165,\n    score: 0,\n    newItem: null,\n\n    scoreLabel: cc.Label,\n    bestLabel: cc.Label,\n    item: cc.Node,\n    table: cc.Node,\n    tableChild: cc.Prefab,\n    itemPrefab: cc.Prefab,\n    deckItem: cc.Node,\n\n    posArr: [],\n    indexArr: [],\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad() {\n    Emitter.instance = new Emitter();\n    Emitter.instance.registerEvent(\"DOWN\", this.goDown.bind(this));\n    Emitter.instance.registerEvent(\"UP\", this.goUp.bind(this));\n    Emitter.instance.registerEvent(\"RIGHT\", this.goRight.bind(this));\n    Emitter.instance.registerEvent(\"LEFT\", this.goLeft.bind(this));\n    Emitter.instance.registerEvent(\"CREATE RANDOM ITEM\", this.createRandomItem.bind(this));\n    Emitter.instance.registerEvent(\"MATCH ROW\", this.matchItemRow.bind(this));\n    Emitter.instance.registerEvent(\"MATCH COL\", this.matchItemCol.bind(this));\n\n    this.posArr = [\n      cc.v2(-165, 65),\n      cc.v2(-55, 65),\n      cc.v2(55, 65),\n      cc.v2(165, 65),\n      cc.v2(-165, -45),\n      cc.v2(-55, -45),\n      cc.v2(55, -45),\n      cc.v2(165, -45),\n      cc.v2(-165, -155),\n      cc.v2(55, -155),\n      cc.v2(-55, -155),\n      cc.v2(165, -155),\n      cc.v2(-165, -265),\n      cc.v2(-55, -265),\n      cc.v2(55, -265),\n      cc.v2(165, -265),\n    ];\n    this.createTable();\n    this.createPreFab();\n    // if (this.newItemLevel.string == 0) {\n    //   this.newItem.color = \"#8D8D8C\";\n    // }\n  },\n\n  start() {},\n\n  update(dt) {\n    this.positionCheck();\n  },\n  createTable() {\n    for (let i = 1; i <= 4; i++) {\n      for (let j = 1; j <= 4; j++) {\n        let newTableChild = cc.instantiate(this.tableChild);\n        this.table.addChild(newTableChild);\n      }\n    }\n  },\n  createPreFab() {\n    // this.newItem = cc.instantiate(this.itemPrefab);\n    // this.deckItem.addChild(this.newItem);\n    // let newItemLevel = this.newItem.children[0].getComponent(cc.Label);\n    // newItemLevel.string = 0;\n    // let randomArr = [2, 4];\n    // newItemLevel.string =\n    //   randomArr[Math.floor(Math.random() * randomArr.length)];\n    // let itemPos = this.posArr[Math.floor(Math.random() * this.posArr.length)];\n    // cc.log(itemPos);\n    // this.newItem.position = itemPos;\n    for (let i = 0; i < 16; i++) {\n      this.newItem = cc.instantiate(this.itemPrefab);\n      this.deckItem.addChild(this.newItem);\n      this.newItem.children[0].getComponent(cc.Label).string = 0;\n      this.indexArr.push(this.newItem);\n      this.newItem.position = this.posArr[i];\n    }\n    // cc.log(this.deckItem.children);\n    cc.log(this.indexArr);\n    this.createRandomItem();\n    this.createRandomItem();\n  },\n  createRandomItem() {\n    let randomNumber = Math.floor(Math.random() * this.indexArr.length);\n    if (this.indexArr[randomNumber].children[0].getComponent(cc.Label).string == 0) {\n      this.indexArr[randomNumber].children[0].getComponent(cc.Label).string = 2;\n      this.checkForLose();\n    } else this.createRandomItem();\n  },\n  matchItemRow() {\n    for (let i = 0; i < 15; i++) {\n      if (\n        this.indexArr[i].children[0].getComponent(cc.Label).string ===\n        this.indexArr[i + 1].children[0].getComponent(cc.Label).string\n      ) {\n        let matchTotal =\n          parseInt(this.indexArr[i].children[0].getComponent(cc.Label).string) +\n          parseInt(this.indexArr[i + 1].children[0].getComponent(cc.Label).string);\n        this.indexArr[i].children[0].getComponent(cc.Label).string = matchTotal;\n        this.indexArr[i + 1].children[0].getComponent(cc.Label).string = 0;\n        this.score += matchTotal;\n        this.scoreLabel.string = `Score:\\n${this.score}`;\n      }\n    }\n    this.checkForWin();\n  },\n  matchItemCol() {\n    for (let i = 0; i < 12; i++) {\n      if (\n        this.indexArr[i].children[0].getComponent(cc.Label).string ===\n        this.indexArr[i + 4].children[0].getComponent(cc.Label).string\n      ) {\n        let matchTotal =\n          parseInt(this.indexArr[i].children[0].getComponent(cc.Label).string) +\n          parseInt(this.indexArr[i + 4].children[0].getComponent(cc.Label).string);\n        this.indexArr[i].children[0].getComponent(cc.Label).string = matchTotal;\n        this.indexArr[i + 4].children[0].getComponent(cc.Label).string = 0;\n        this.score += matchTotal;\n        this.scoreLabel.string = `Score:\\n${this.score}`;\n      }\n    }\n    this.checkForWin();\n  },\n  positionCheck() {\n    if (this.item.y <= -(this.limit + 100)) {\n      this.item.y = -(this.limit + 100);\n    }\n    if (this.item.y >= this.limit - 100) {\n      this.item.y = this.limit - 100;\n    }\n    if (this.item.x <= -this.limit) {\n      this.item.x = -this.limit;\n    } else if (this.item.x >= this.limit) {\n      this.item.x = this.limit;\n    }\n  },\n  goRight() {\n    // let goRight = cc.moveBy(0.2, -this.limit * 2, 0);\n    // this.item.runAction(goRight);\n    for (let i = 0; i < 16; i++) {\n      if (i % 4 === 0) {\n        let rowOne = this.indexArr[i].children[0].getComponent(cc.Label).string;\n        let rowTwo = this.indexArr[i + 1].children[0].getComponent(cc.Label).string;\n        let rowThree = this.indexArr[i + 2].children[0].getComponent(cc.Label).string;\n        let rowFour = this.indexArr[i + 3].children[0].getComponent(cc.Label).string;\n        let rows = [parseInt(rowOne), parseInt(rowTwo), parseInt(rowThree), parseInt(rowFour)];\n\n        let filteredRow = rows.filter((num) => num);\n\n        let missingRow = 4 - filteredRow.length;\n        let zeros = Array(missingRow).fill(0);\n\n        let newRow = zeros.concat(filteredRow);\n\n        this.indexArr[i].children[0].getComponent(cc.Label).string = newRow[0];\n        this.indexArr[i + 1].children[0].getComponent(cc.Label).string = newRow[1];\n        this.indexArr[i + 2].children[0].getComponent(cc.Label).string = newRow[2];\n        this.indexArr[i + 3].children[0].getComponent(cc.Label).string = newRow[3];\n      }\n    }\n  },\n  goLeft() {\n    // let goLeft = cc.moveBy(0.2, this.limit * -2, 0);\n    // this.item.runAction(goLeft);\n    for (let i = 0; i < 16; i++) {\n      if (i % 4 === 0) {\n        let rowOne = this.indexArr[i].children[0].getComponent(cc.Label).string;\n        let rowTwo = this.indexArr[i + 1].children[0].getComponent(cc.Label).string;\n        let rowThree = this.indexArr[i + 2].children[0].getComponent(cc.Label).string;\n        let rowFour = this.indexArr[i + 3].children[0].getComponent(cc.Label).string;\n        let rows = [parseInt(rowOne), parseInt(rowTwo), parseInt(rowThree), parseInt(rowFour)];\n\n        let filteredRow = rows.filter((num) => num);\n\n        let missingRow = 4 - filteredRow.length;\n        let zeros = Array(missingRow).fill(0);\n\n        let newRow = filteredRow.concat(zeros);\n\n        this.indexArr[i].children[0].getComponent(cc.Label).string = newRow[0];\n        this.indexArr[i + 1].children[0].getComponent(cc.Label).string = newRow[1];\n        this.indexArr[i + 2].children[0].getComponent(cc.Label).string = newRow[2];\n        this.indexArr[i + 3].children[0].getComponent(cc.Label).string = newRow[3];\n      }\n    }\n  },\n  goUp() {\n    // let goUp = cc.moveBy(0.2, 0, 330);\n    // this.item.runAction(goUp);\n    for (let i = 0; i < 4; i++) {\n      let colOne = this.indexArr[i].children[0].getComponent(cc.Label).string;\n      let colTwo = this.indexArr[i + 4].children[0].getComponent(cc.Label).string;\n      let colThree = this.indexArr[i + 4 * 2].children[0].getComponent(cc.Label).string;\n      let colFour = this.indexArr[i + 4 * 3].children[0].getComponent(cc.Label).string;\n      let cols = [parseInt(colOne), parseInt(colTwo), parseInt(colThree), parseInt(colFour)];\n\n      let filteredCol = cols.filter((num) => num);\n\n      let missingCol = 4 - filteredCol.length;\n      let zeros = Array(missingCol).fill(0);\n\n      let newCol = filteredCol.concat(zeros);\n\n      this.indexArr[i].children[0].getComponent(cc.Label).string = newCol[0];\n      this.indexArr[i + 4].children[0].getComponent(cc.Label).string = newCol[1];\n      this.indexArr[i + 4 * 2].children[0].getComponent(cc.Label).string = newCol[2];\n      this.indexArr[i + 4 * 3].children[0].getComponent(cc.Label).string = newCol[3];\n    }\n  },\n  goDown() {\n    // let goDown = cc.moveBy(0.2, 0, -330);\n    // this.item.runAction(goDown);\n\n    for (let i = 0; i < 4; i++) {\n      let colOne = this.indexArr[i].children[0].getComponent(cc.Label).string;\n      let colTwo = this.indexArr[i + 4].children[0].getComponent(cc.Label).string;\n      let colThree = this.indexArr[i + 4 * 2].children[0].getComponent(cc.Label).string;\n      let colFour = this.indexArr[i + 4 * 3].children[0].getComponent(cc.Label).string;\n      let cols = [parseInt(colOne), parseInt(colTwo), parseInt(colThree), parseInt(colFour)];\n\n      let filteredCol = cols.filter((num) => num);\n\n      let missingCol = 4 - filteredCol.length;\n      let zeros = Array(missingCol).fill(0);\n\n      let newCol = zeros.concat(filteredCol);\n\n      this.indexArr[i].children[0].getComponent(cc.Label).string = newCol[0];\n      this.indexArr[i + 4].children[0].getComponent(cc.Label).string = newCol[1];\n      this.indexArr[i + 4 * 2].children[0].getComponent(cc.Label).string = newCol[2];\n      this.indexArr[i + 4 * 3].children[0].getComponent(cc.Label).string = newCol[3];\n    }\n  },\n\n  checkForWin() {\n    for (let i = 0; i < this.indexArr.length; i++) {\n      if (this.indexArr[i].children[0].getComponent(cc.Label).string == 2048) {\n        cc.log(\"You Win!\");\n      }\n    }\n  },\n  checkForLose() {\n    let zeros = 0;\n    for (let i = 0; i < this.indexArr.length; i++) {\n      if (this.indexArr[i].children[0].getComponent(cc.Label).string == 0) {\n        zeros++;\n      }\n    }\n    if (zeros === 0) {\n      cc.log(\"You Lose!\");\n    }\n  },\n});\n"]}