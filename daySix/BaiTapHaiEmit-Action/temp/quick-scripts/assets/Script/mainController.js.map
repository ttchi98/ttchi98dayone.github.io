{"version":3,"sources":["mainController.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","goLeftFlag","goRightFlag","goJumpFlag","counter","frames","limitX","mainItem","Node","onLoad","instance","registerEvent","goLeft","bind","goRight","goJump","resetPos","start","update","dt","checkMove","limitPos","disableButton","disableKey","resetMove","moveBy","runAction","x","y","scaleX","angle","value","emit"],"mappings":"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","file":"mainController.js","sourceRoot":"../../../../assets/Script","sourcesContent":["const Emitter = require(\"mEmitter\");\ncc.Class({\n  extends: cc.Component,\n  properties: {\n    goLeftFlag: false,\n    goRightFlag: false,\n    goJumpFlag: false,\n    counter: 0,\n    frames: 40,\n    limitX: 377,\n    mainItem: cc.Node,\n  },\n  // LIFE-CYCLE CALLBACKS:\n  onLoad() {\n    Emitter.instance = new Emitter();\n    Emitter.instance.registerEvent(\"LEFT\", this.goLeft.bind(this));\n    Emitter.instance.registerEvent(\"RIGHT\", this.goRight.bind(this));\n    Emitter.instance.registerEvent(\"JUMP\", this.goJump.bind(this));\n    Emitter.instance.registerEvent(\"RESET\", this.resetPos.bind(this));\n  },\n  start() {},\n  update(dt) {\n    this.checkMove();\n    this.limitPos();\n  },\n  checkMove() {\n    if (this.goLeftFlag || this.goRightFlag || this.goJumpFlag) {\n      if (this.counter >= this.frames) {\n        this.disableButton(true);\n        this.disableKey(true);\n        this.resetMove();\n        return;\n      }\n      // if (this.goLeftFlag)\n      //   if (this.goRightFlag)\n      //     if (this.goJumpFlag) {\n      //       if (this.counter < this.frames / 2) {\n      //         this.mainItem.y += 5;\n      //       } else this.mainItem.y -= 5;\n\n      //       if (this.counter >= this.frames / 4 && this.counter < this.frames) {\n      //         this.mainItem.angle += 360 / ((this.frames * 3) / 4);\n      //       }\n      //     }\n      this.disableButton(false);\n      this.disableKey(false);\n      this.counter++;\n    }\n  },\n  goLeft() {\n    this.goLeftFlag = true;\n    this.counter = 0;\n    let goLeft = cc.moveBy(0.5, -80, 0);\n    this.mainItem.runAction(goLeft);\n  },\n  goRight() {\n    this.goRightFlag = true;\n    this.counter = 0;\n    let goRight = cc.moveBy(0.5, +80, 0);\n    this.mainItem.runAction(goRight);\n  },\n  goJump() {\n    this.goJumpFlag = true;\n    this.counter = 0;\n  },\n  resetPos() {\n    this.mainItem.x = 0;\n    this.mainItem.y = -150;\n    this.mainItem.scaleX = 1;\n    this.mainItem.angle = 0;\n  },\n  resetMove() {\n    this.goLeftFlag = false;\n    this.goRightFlag = false;\n    this.goJumpFlag = false;\n  },\n  disableButton(value) {\n    Emitter.instance.emit(\"DISABLE BUTTON\", value);\n  },\n  disableKey(value) {\n    Emitter.instance.emit(\"DISABLE KEY\", value);\n  },\n  limitPos() {\n    if (this.mainItem.x <= -this.limitX) {\n      this.mainItem.x = -this.limitX;\n    } else if (this.mainItem.x >= this.limitX) {\n      this.mainItem.x = this.limitX;\n    }\n  },\n});\n"]}